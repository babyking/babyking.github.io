<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
  
	<title> code测试</title>
  

	<link rel="stylesheet" type="text/css" href="/css/style.css" />
	<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/lzyy">
</head>


<body>
	<div id="nav">
	<div class="wrapper">
		<div id="logo"><a href="/"><img src="/image/logo.png" /></a></h1>
		</div>
		<ul>
			<li id="category-home"><a href="/">首页</a></li>
			<li id="category-tech"><a href="/category/tech.html">技术</a></li>
			<li id="category-music"><a href="/category/music.html">音乐</a></li>
			<li id="category-sketch"><a href="/category/sketch.html">随笔</a></li>
			<li id="category-discovery"><a href="/category/discovery.html">发现</a></li>
			<!-- <li id="category-about"><a href="/category/about.html">关于</a></li> -->
		</ul>
	</div>
</div>

<script>
	var category = location.pathname;
	if (category == '/') {
		document.getElementById('category-home').style.textDecoration = "underline";
	} else if (category == '/category/tech.html') {
		document.getElementById('category-tech').style.textDecoration = "underline";
	} else if (category == '/category/music.html') {
		document.getElementById('category-music').style.textDecoration = "underline";
	} else if (category == '/category/discovery.html') {
		document.getElementById('category-discovery').style.textDecoration = "underline";
	} else if (category == '/category/sketch.html') {
		document.getElementById('category-sketch').style.textDecoration = "underline";
	} else if (category == '/category/about.html') {
		// document.getElementById('category-about').style.textDecoration = "underline";
	}

</script>
	<div class="wrapper main">
		<div id="content">
			<h1>code测试</h1>
			<span class="sub_date">September 19, 2019</span>
			<div class="cnt">
				<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="c1">#encoding: utf-8</span>
<span class="nb">require</span> <span class="s1">'nokogiri'</span>
<span class="nb">require</span> <span class="s1">'open-uri'</span>

<span class="c1">#创建document</span>
<span class="k">def</span> <span class="nf">getdoc</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="no">URI</span><span class="o">::</span><span class="n">escape</span><span class="p">(</span><span class="n">url</span><span class="p">)))</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">getele</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">css</span><span class="p">)</span>
  <span class="p">(</span><span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="no">URI</span><span class="o">::</span><span class="n">escape</span><span class="p">(</span><span class="n">url</span><span class="p">)))).</span><span class="nf">css</span><span class="p">(</span><span class="n">css</span><span class="p">)</span>
<span class="k">end</span>


<span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">page</span><span class="o">|</span>
  <span class="n">url</span> <span class="o">=</span> <span class="s2">"http://www.ed2000.com/FileList.asp?PageIndex=</span><span class="si">#{</span><span class="n">page</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&amp;FileCategory=图书&amp;SubCategory=计算机与网络"</span>
  <span class="n">doc</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="n">doc</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s1">'table.CommonListArea tr.CommonListCell td a'</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span>
    <span class="n">url2</span> <span class="o">=</span> <span class="s2">"http://www.ed2000.com</span><span class="si">#{</span><span class="n">a</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="s1">'href'</span><span class="p">].</span><span class="nf">index</span><span class="p">(</span><span class="s1">'/ShowFile'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
    <span class="c1"># puts url2</span>
    <span class="n">getdoc</span><span class="p">(</span><span class="n">url2</span><span class="p">).</span><span class="nf">css</span><span class="p">(</span><span class="s1">'table.CommonListArea tr.CommonListCell td a'</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">a2</span><span class="o">|</span>
      <span class="nb">puts</span> <span class="n">a2</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">if</span> <span class="n">a2</span><span class="p">[</span><span class="s1">'href'</span><span class="p">].</span><span class="nf">to_s</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s1">'ed2k:'</span><span class="p">)</span>
    <span class="k">end</span>

  <span class="k">end</span>

<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="c1"># coding: utf8
</span><span class="kn">import</span> <span class="nn">logging</span>

<span class="k">def</span> <span class="nf">use_logging</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s is running"</span> <span class="o">%</span> <span class="n">func</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">use_logging</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"i am foo"</span><span class="p">)</span>

<span class="o">@</span><span class="n">use_logging</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"i am bar"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">bar</span><span class="p">()</span>
	<span class="n">foo</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>


				<br />
				<!-- --EOF--
				<p>若无特别说明，本站文章均为原创，转载请保留链接，谢谢</p> -->
			</div>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=babyking">comments powered
					by Disqus.</a></noscript>
		</div>
		<div id="footer">
	<p style="color:#ccc;font-size:12px;text-align: center">穿越这无限世界</p>
	<p style="clear:both"></p>
</div>
<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-127077562-1';
    var _gaDomain = '';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>


	</div>
</body>

</html>